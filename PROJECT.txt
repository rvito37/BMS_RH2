================================================================================
PROJECT: xbase_reports — RH2 to Harbour/HTML Report Migration
================================================================================
Company: AVX Israel (Kyocera-AVX)
Goal: Migrate legacy R&R Report Writer (.RH2) reports to Harbour + HTML/PDF
Pilot report: RPQC01V1 — "Production Line Report"

================================================================================
DIRECTORY STRUCTURE
================================================================================

xbase_reports/
  |
  +-- PROJECT.txt           <-- this file
  |
  +-- rh2_files/            <-- original R&R binary report definitions
  |     RPQC01V1.RH2        - classic layout (used by 9 of 12 sorts)
  |     RPQC01V2.RH2        - form-feed per workstation variant
  |     RPQC01V3.RH2        - value grouping variant
  |     RPQC01V4.RH2        - "new" layout (main, 4 of 5 sorts)
  |     RPQC01V5.RH2        - project sort variant
  |
  +-- source_prg/           <-- original Clipper source code
  |     RPQC01V1.PRG         - report interface (criteria, sorts, fields, UDFs)
  |     THEREPO.PRG           - TheReport class (report engine framework)
  |
  +-- analysis/             <-- parsed data and analysis
  |     RH2_RPQC01V4_ANALYSIS.txt  - full structural analysis of RPQC01V4
  |     RH2_PARSED.txt              - raw string dump of ALL 200 RH2 files
  |
  +-- tools/                <-- parsing utilities
        parse_rh2.ps1        - full regex-based parser (slow)
        parse_rh2_fast.ps1   - fast string extraction parser
        parse_one_rh2.ps1    - structured single-file parser

================================================================================
PILOT: RPQC01V1.PRG / RPQC01V4.RH2
================================================================================

Two variants in one PRG:
  "RPQC01V1" (classic) - 12 sorts, RH2: V1/V2/V3
  else (new)           - 5 sorts,  RH2: V4/V5

Sort-to-RH2 mapping (new variant):
  1. Proc(D)+Rep.Stage+Hours At             -> RPQC01V4
  2. Type+Line+Size+Proc(D)+R.St.+Ho.At    -> RPQC01V4
  3. Type+Line+Size+Val+Proc(D)+R.St+Ho.At -> RPQC01V4
  4. Wrkst+Proc(D)+Rep.Stage+Hours At      -> RPQC01V4
  5. Proj+Line+Size+Val+Prior+Slack         -> RPQC01V5

Tables: D_LINE (main), C_PROC (process master x2 aliases), M_LINEMV (movements)
Relations: D_LINE->CPPROC_ID=C_PROC, D_LINE->PPPROC_ID=C_PROC1,
           D_LINE->B_ID+CPPROC_ID=M_LINEMV

Key UDFs: Slack_01, QtyPromised, QtyExpected, RepStage, HoursAt,
          GetDate01, GetTime01, CurrentProcnNM, Testforproctype, Getbloc

================================================================================
NEXT STEPS
================================================================================
[ ] Parse differences between V1/V2/V3/V4/V5 RH2 layouts
[ ] Generate Harbour .prg that recreates RPQC01V4 as HTML
[ ] Port UDF functions to Harbour
[ ] Test with real ADS data
[ ] Expand to remaining RH2 reports
